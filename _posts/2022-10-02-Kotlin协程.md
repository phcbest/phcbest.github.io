---
layout: article
title: Kotlin协程
tags: Android
---

# 协程的介绍

**Coroutines** are [computer program](https://en.wikipedia.org/wiki/Computer_program) components that generalize [subroutines](https://en.wikipedia.org/wiki/Subroutine) for [non-preemptive multitasking](https://en.wikipedia.org/wiki/Non-preemptive_multitasking), by allowing execution to be suspended and resumed. Coroutines are well-suited for implementing familiar program components such as [cooperative tasks](https://en.wikipedia.org/wiki/Cooperative_multitasking), [exceptions](https://en.wikipedia.org/wiki/Exception_handling), [event loops](https://en.wikipedia.org/wiki/Event_loop), [iterators](https://en.wikipedia.org/wiki/Iterator), [infinite lists](https://en.wikipedia.org/wiki/Lazy_evaluation) and [pipes](https://en.wikipedia.org/wiki/Pipeline_(software)).

According to [Donald Knuth](https://en.wikipedia.org/wiki/Donald_Knuth), [Melvin Conway](https://en.wikipedia.org/wiki/Melvin_Conway) coined the term *coroutine* in 1958 when he applied it to the construction of an [assembly program](https://en.wikipedia.org/wiki/Assembly_language).[[1\]](https://en.wikipedia.org/wiki/Coroutine#cite_note-KnuthVol1_1_4_5-1) The first published explanation of the coroutine appeared later, in 1963.[[2\]](https://en.wikipedia.org/wiki/Coroutine#cite_note-Conway1963-2)

协程和thread类似，但是和thread也有很大的区别

# 协程的理解

协程也可以叫做**微线程**，是一种新的多任务并发的操作手段

- 是一个运行在单线程中的并发程序
- 省去了传统thread多线程并发机制中切换线程带来的**线程上下文切换**，**线程状态切换**，**thread初始化**的性能消耗，可以大幅度提高并发性能
- 简而言之，协程是在单线程上由程序员自己调度运行的**并行计算机制**

协程是一个非常轻量级的线程，**线程是系统级的**，**协程是编译器级的**

Coroutine的实现通常是对某个语言做出相应的提议，通过后作为编译器标准，之后编译器厂商来实现该机制，thread是操作系统的机制，通过API暴露给下层调用

